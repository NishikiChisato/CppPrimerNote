# 处理器体系结构

- [处理器体系结构](#处理器体系结构)
  - [Y86-64 指令集体系结构](#y86-64-指令集体系结构)
    - [程序员可见状态](#程序员可见状态)
    - [Y86-64 指令](#y86-64-指令)


## Y86-64 指令集体系结构

一条指令被编码为由一个或多个字节序列组成的二进制格式，一个处理器至此的指令和指令的字节级编码称为它的指令集体系结构 `Instruction-Set Architecture, ISA`

### 程序员可见状态

`Y86-64` 程序的每条指令都会读取或修改处理器的状态，这些「状态」被称为程序员可见状态。这里的「程序员」既可以指用汇编写代码的人，也可以指生成机器级代码的编译器（机器级代码也就是汇编代码）

`Y86-64` 的程序员可见状态如下：

* `RF`：程序寄存器
  * 不同与 `x68-64` ，`Y86-64` 只有 $15$ 个 **$64$ 位**寄存器：`%rax, %rcx, %rdx, %rbx, %rsp, %rbp, %rsi, %rdi` 和 `%r8` 到 `%r14`
  * `%rsp` 被入栈、出栈、调用和返回指令作为栈指针，除此以外寄存器没有固定的含义和固定值
* `CC`：条件码
  * `Y86-64` 有 $3$ 个**一位**的条件码：`ZF, SF, OF`，用以保存最近一次算术或逻辑指令所造成的影响
* `PC`：程序计数器
  * 存放当前正在执行的指令的地址（这里不是当前正在执行的指令的下一条指令的地址）
* `Stat`：程序状态
  * 用于表明程序执行的总体状态，是正常运行还是发生某种异常
* `DMEM`：内存
  * `Y86-64` 用虚拟内存来引用内存位置。硬件和操作系统软件联合将虚拟地址映射为实际的物理地址，用于指明数据实际存储在哪个地方（而机器级程序不需要关注这一点）

### Y86-64 指令

`Y86-64` 的指令集为 `x86-64` 指令集的子集。它只包含 $8$ 字节整数的操作，由于只有 $8$ 字节的数据，因此在此被称为「字」（在 `x86-64` 中，「字」表示 `2 bytes`）

以下为 `Y86-64` 的指令及其字节编码

![Y86-64 ISA](../img/Y86-64%20ISA.png)

